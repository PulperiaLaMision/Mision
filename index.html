<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pulpería La Misión</title>
    <style>
        /* ... [estilos existentes] ... */
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        // Variables globales
        let total = 0;
        let selectedProducts = {};

        // Funciones existentes

        function addProduct(name, price) {
            total += price;
            document.getElementById('total').innerText = total;

            if (selectedProducts[name]) {
                selectedProducts[name].quantity += 1;
            } else {
                selectedProducts[name] = { price: price, quantity: 1 };
            }
            updateSelectedProductsTable();
        }

        function removeProduct(name, price) {
            if (selectedProducts[name] && selectedProducts[name].quantity > 0) {
                total -= price;
                document.getElementById('total').innerText = total;
                selectedProducts[name].quantity -= 1;

                if (selectedProducts[name].quantity === 0) {
                    delete selectedProducts[name];
                }
                updateSelectedProductsTable();
            }
        }

        function updateSelectedProductsTable() {
            const table = document.getElementById('productTable');
            table.innerHTML = `
                <tr>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Precio</th>
                </tr>
            `;

            let selectedTotal = 0;

            for (let product in selectedProducts) {
                const row = table.insertRow();
                const cell1 = row.insertCell(0);
                const cell2 = row.insertCell(1);
                const cell3 = row.insertCell(2);

                cell1.innerHTML = product;
                cell2.innerHTML = selectedProducts[product].quantity;
                cell3.innerHTML = selectedProducts[product].price * selectedProducts[product].quantity;

                selectedTotal += selectedProducts[product].price * selectedProducts[product].quantity;
            }

            document.getElementById('selectedTotal').innerText = selectedTotal;
        }

        function clearAllProducts() {
            total = 0;
            selectedProducts = {};
            document.getElementById('total').innerText = total;
            updateSelectedProductsTable();
            toggleSelectedProducts(); // Cierra el cuadro de productos seleccionados
            toggleChangeCalculator(); // Cierra el cuadro de calculadora de vuelto
        }
    </script>
</head>
<body>
    <div class="fixed-top">
        <h1>Pulpería La Misión</h1>
        <p>Total: <span id="total">0.00</span> Lps</p>
        <button class="button green-button" onclick="toggleSelectedProducts()">Productos Seleccionados</button>
        <button class="button orange-button" onclick="toggleChangeCalculator()">Vuelto</button>
    </div>

    <div class="container">
        <!-- Lista de productos -->
        <div class="products-list">
            <div class="product-info">
                <p>Coca Cola Medio Lata/Bote</p>
                <p class="price">20 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('Coca Cola Medio Lata/Bote', 20)">+</button>
                <button class="button red-button" onclick="removeProduct('Coca Cola Medio Lata/Bote', 20)">-</button>
            </div>
        </div>

        <div class="products-list">
            <div class="product-info">
                <p>Fresca 1.5</p>
                <p class="price">35 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('Fresca 1.5', 35)">+</button>
                <button class="button red-button" onclick="removeProduct('Fresca 1.5', 35)">-</button>
            </div>
        </div>
        
        <div class="products-list">
            <div class="product-info">
                <p>Canada Dry Medio Lata/Bote</p>
                <p class="price">20 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('Canada Dry Medio Lata/Bote', 20)">+</button>
                <button class="button red-button" onclick="removeProduct('Canada Dry Medio Lata/Bote', 20)">-</button>
            </div>
        </div>
        
        <div class="products-list">
            <div class="product-info">
                <p>Coca Cola 1.5 lts</p>
                <p class="price">35 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('Coca Cola 1.5 lts', 35)">+</button>
                <button class="button red-button" onclick="removeProduct('Coca Cola 1.5 lts', 35)">-</button>
            </div>
        </div>
        
        <div class="products-list">
            <div class="product-info">
                <p>Uva 1.1 Lts</p>
                <p class="price">30 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('Uva 1.1 Lts', 30)">+</button>
                <button class="button red-button" onclick="removeProduct('Uva 1.1 Lts', 30)">-</button>
            </div>
        </div>

        <div class="products-list">
            <div class="product-info">
                <p>Mountain Medio Lata/Bote</p>
                <p class="price">20 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('Mountain Medio Lata/Bote', 20)">+</button>
                <button class="button red-button" onclick="removeProduct('Mountain Medio Lata/Bote', 20)">-</button>
            </div>
        </div>

        <div class="products-list">
            <div class="product-info">
                <p>Valle Nectar Guayaba</p>
                <p class="price">15 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('Valle Nectar Guayaba', 15)">+</button>
                <button class="button red-button" onclick="removeProduct('Valle Nectar Guayaba', 15)">-</button>
            </div>
        </div>
        
        <div class="products-list">
            <div class="product-info">
                <p>SevenUp 1.25 Lts</p>
                <p class="price">30 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('SevenUp 1.25 Lts', 30)">+</button>
                <button class="button red-button" onclick="removeProduct('SevenUp 1.25 Lts', 30)">-</button>
            </div>
        </div>

        <div class="products-list">
            <div class="product-info">
                <p>Agua Azul Pequeña</p>
                <p class="price">10 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('Agua Azul Pequeña', 10)">+</button>
                <button class="button red-button" onclick="removeProduct('Agua Azul Pequeña', 10)">-</button>
            </div>
        </div>

        <div class="products-list">
            <div class="product-info">
                <p>Zibas</p>
                <p class="price">10 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('Zibas', 10)">+</button>
                <button class="button red-button" onclick="removeProduct('Zibas', 10)">-</button>
            </div>
        </div>
        
        <div class="products-list">
            <div class="product-info">
                <p>Elolitos Verdes</p>
                <p class="price">5 Lps</p>
            </div>
            <div class="button-group">
                <button class="button green-button" onclick="addProduct('Elotitos Verdes', 5)">+</button>
                <button class="button red-button" onclick="removeProduct('Elotitos Verdes', 5)">-</button>
            </div>
        </div>

        <!-- Productos seleccionados -->
        <div class="selected-products" id="selectedProducts">
            <

h2>Productos Seleccionados</h2>
            <table id="productTable"></table>
            <p>Total Seleccionado: <span id="selectedTotal">0</span> Lps</p>
            <button class="button red-button" onclick="clearAllProducts()">Borrar Todo</button>
        </div>

        <!-- Calculadora de vuelto -->
        <div class="change-calculator" id="changeCalculator">
            <h2>Calculadora de Vuelto</h2>
            <label for="amountPaid">Monto Pagado:</label>
            <input type="number" id="amountPaid" placeholder="Ingrese monto pagado">
            <button class="button green-button" onclick="calculateChange()">Calcular Vuelto</button>
            <p>Vuelto: <span id="changeAmount">0</span> Lps</p>
        </div>
    </div>

    <script>
        function toggleSelectedProducts() {
            const selectedProductsDiv = document.getElementById('selectedProducts');
            selectedProductsDiv.style.display = selectedProductsDiv.style.display === 'none' ? 'block' : 'none';
        }

        function toggleChangeCalculator() {
            const changeCalculatorDiv = document.getElementById('changeCalculator');
            changeCalculatorDiv.style.display = changeCalculatorDiv.style.display === 'none' ? 'block' : 'none';
        }

        function calculateChange() {
            const amountPaid = parseFloat(document.getElementById('amountPaid').value);
            const change = amountPaid - total;
            document.getElementById('changeAmount').innerText = change >= 0 ? change.toFixed(2) : 'Monto insuficiente';
        }

        // Inicializar el total y los productos seleccionados
        updateSelectedProductsTable();
    </script>
</body>
</html>